-- Migration: Create Static Pages Table
-- Description: Create table for storing static pages content (legal pages, footer, etc.)
-- Created: 2025-12-10

-- Create static_pages table
CREATE TABLE IF NOT EXISTS static_pages (
  -- Primary Key
  id VARCHAR(100) PRIMARY KEY, -- e.g., 'seo-footer', 'impressum', 'datenschutz'
  
  -- Content
  title VARCHAR(500) NOT NULL,
  content TEXT NOT NULL, -- HTML content from React-Quill editor
  path VARCHAR(500) NOT NULL, -- URL path e.g., '/', '/impressum', '/datenschutz'
  
  -- Timestamps
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  
  -- Constraints
  CONSTRAINT unique_static_page_path UNIQUE (path)
);

-- Create indexes for performance
CREATE INDEX idx_static_pages_path ON static_pages(path);
CREATE INDEX idx_static_pages_updated_at ON static_pages(updated_at DESC);

-- Add trigger to automatically update updated_at timestamp
CREATE OR REPLACE FUNCTION update_static_pages_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_update_static_pages_updated_at
  BEFORE UPDATE ON static_pages
  FOR EACH ROW
  EXECUTE FUNCTION update_static_pages_updated_at();

-- Add comments for documentation
COMMENT ON TABLE static_pages IS 'Static pages content managed through admin interface (legal pages, SEO footer, etc.)';
COMMENT ON COLUMN static_pages.id IS 'Unique identifier for the page (e.g., seo-footer, impressum, datenschutz)';
COMMENT ON COLUMN static_pages.path IS 'URL path where the page is accessible';
COMMENT ON COLUMN static_pages.content IS 'HTML content from React-Quill rich text editor';

-- Migrate existing content from data/static-pages.json
-- This data represents the current content that needs to be preserved
INSERT INTO static_pages (id, title, content, path, created_at, updated_at)
VALUES (
  'seo-footer',
  'SEO Footer (Homepage)',
  '<div style="max-width: 1200px; margin: 0 auto;"><div style="text-align: center; margin-bottom: 60px; padding: 40px 20px; background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); border-radius: 16px;"><h2 style="font-size: 40px; font-weight: 800; color: #2a2a2a; margin-bottom: 20px; letter-spacing: -0.03em;">Where2Go - Deine Event-Plattform fÃ¼r unvergessliche Erlebnisse</h2><p style="font-size: 20px; line-height: 1.6; color: #333333; max-width: 800px; margin: 0 auto;">Entdecke die besten <strong>Events, Konzerte, Ausstellungen und Veranstaltungen</strong> in deiner Stadt. Where2Go ist die fÃ¼hrende Plattform fÃ¼r Event-Entdeckungen und bringt dich zu den aufregendsten Erlebnissen â€“ egal ob Musik, Kultur, Sport oder Nightlife.</p></div><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 32px; margin-bottom: 60px;"><div style="padding: 30px; background: #ffffff; border: 1px solid #d0d0d0; border-radius: 12px; transition: transform 0.2s ease;"><div style="width: 48px; height: 48px; background: #2a2a2a; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div><h3 style="font-size: 22px; font-weight: 700; color: #2a2a2a; margin-bottom: 12px;">Umfassende Event-Datenbank</h3><p style="font-size: 15px; line-height: 1.7; color: #4a4a4a; margin: 0;">Wir aggregieren <strong>tausende von Events</strong> aus verschiedenen Quellen und bieten dir eine vollstÃ¤ndige Ãœbersicht Ã¼ber alle Veranstaltungen in deiner Stadt â€“ von groÃŸen Konzerten bis zu intimen Club-Events.</p></div><div style="padding: 30px; background: #ffffff; border: 1px solid #d0d0d0; border-radius: 12px; transition: transform 0.2s ease;"><div style="width: 48px; height: 48px; background: #2a2a2a; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></div><h3 style="font-size: 22px; font-weight: 700; color: #2a2a2a; margin-bottom: 12px;">Intelligente Suchfunktion</h3><p style="font-size: 15px; line-height: 1.7; color: #4a4a4a; margin: 0;">Finde Events nach <strong>Datum, Kategorie, Veranstaltungsort</strong> oder deinen persÃ¶nlichen Interessen. Unsere KI-gestÃ¼tzte Suche liefert dir genau die Veranstaltungen, die zu dir passen.</p></div><div style="padding: 30px; background: #ffffff; border: 1px solid #d0d0d0; border-radius: 12px; transition: transform 0.2s ease;"><div style="width: 48px; height: 48px; background: #2a2a2a; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg></div><h3 style="font-size: 22px; font-weight: 700; color: #2a2a2a; margin-bottom: 12px;">Immer Aktuell</h3><p style="font-size: 15px; line-height: 1.7; color: #4a4a4a; margin: 0;">Alle Event-Daten werden <strong>kontinuierlich aktualisiert</strong>, damit du immer die neuesten Informationen zu Terminen, Locations und Ticket-VerfÃ¼gbarkeit erhÃ¤ltst.</p></div><div style="padding: 30px; background: #ffffff; border: 1px solid #d0d0d0; border-radius: 12px; transition: transform 0.2s ease;"><div style="width: 48px; height: 48px; background: #2a2a2a; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ffffff" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div><h3 style="font-size: 22px; font-weight: 700; color: #2a2a2a; margin-bottom: 12px;">Benutzerfreundlich</h3><p style="font-size: 15px; line-height: 1.7; color: #4a4a4a; margin: 0;">Unsere intuitive OberflÃ¤che macht es dir <strong>kinderleicht</strong>, das perfekte Event fÃ¼r dich zu finden â€“ egal ob vom Desktop oder unterwegs vom Smartphone.</p></div></div><div style="margin-bottom: 60px;"><h2 style="font-size: 32px; font-weight: 700; color: #2a2a2a; margin-bottom: 32px; text-align: center;">Event-Kategorien fÃ¼r jeden Geschmack</h2><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;"><div style="padding: 24px; background: #f9f9f9; border-radius: 12px; border-left: 4px solid #2a2a2a;"><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">ğŸµ Musik & Konzerte</h3><p style="font-size: 14px; line-height: 1.6; color: #4a4a4a; margin: 0;">Rock, Pop, Jazz, Klassik, elektronische Musik â€“ finde <strong>Live-Konzerte</strong> und Festival-Highlights in deiner NÃ¤he.</p></div><div style="padding: 24px; background: #f9f9f9; border-radius: 12px; border-left: 4px solid #333333;"><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">ğŸ­ Theater & Shows</h3><p style="font-size: 14px; line-height: 1.6; color: #4a4a4a; margin: 0;">Von klassischem Theater Ã¼ber Musicals bis zu Comedy-Shows â€“ erlebe <strong>groÃŸartige BÃ¼hnenkunst</strong>.</p></div><div style="padding: 24px; background: #f9f9f9; border-radius: 12px; border-left: 4px solid #2a2a2a;"><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">ğŸ¨ Kunst & Ausstellungen</h3><p style="font-size: 14px; line-height: 1.6; color: #4a4a4a; margin: 0;">Entdecke <strong>Galerien, Museen und Kunstausstellungen</strong> mit Werken von lokalen und internationalen KÃ¼nstlern.</p></div><div style="padding: 24px; background: #f9f9f9; border-radius: 12px; border-left: 4px solid #333333;"><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">âš½ Sport & Fitness</h3><p style="font-size: 14px; line-height: 1.6; color: #4a4a4a; margin: 0;">FuÃŸball, Basketball, Laufevents und mehr â€“ finde <strong>Sportveranstaltungen</strong> zum Mitmachen oder Zuschauen.</p></div><div style="padding: 24px; background: #f9f9f9; border-radius: 12px; border-left: 4px solid #2a2a2a;"><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">ğŸ· Food & Drinks</h3><p style="font-size: 14px; line-height: 1.6; color: #4a4a4a; margin: 0;">Food Festivals, Weinverkostungen, Brunch-Events â€“ erlebe <strong>kulinarische Highlights</strong> deiner Stadt.</p></div><div style="padding: 24px; background: #f9f9f9; border-radius: 12px; border-left: 4px solid #333333;"><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">ğŸ“š Workshops & Kurse</h3><p style="font-size: 14px; line-height: 1.6; color: #4a4a4a; margin: 0;">Lerne etwas Neues bei <strong>kreativen Workshops</strong>, Sprachkursen oder beruflichen Weiterbildungen.</p></div><div style="padding: 24px; background: #f9f9f9; border-radius: 12px; border-left: 4px solid #2a2a2a;"><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">ğŸ’¼ Networking & Business</h3><p style="font-size: 14px; line-height: 1.6; color: #4a4a4a; margin: 0;">Konferenzen, Meetups, Business-Events â€“ erweitere dein <strong>professionelles Netzwerk</strong>.</p></div><div style="padding: 24px; background: #f9f9f9; border-radius: 12px; border-left: 4px solid #333333;"><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Familie & Kinder</h3><p style="font-size: 14px; line-height: 1.6; color: #4a4a4a; margin: 0;">Kindertheater, Familienfeste, pÃ¤dagogische Events â€“ <strong>SpaÃŸ fÃ¼r die ganze Familie</strong>.</p></div></div></div><div style="margin-bottom: 60px; padding: 40px; background: #2a2a2a; border-radius: 16px; text-align: center; color: #ffffff;"><h2 style="font-size: 32px; font-weight: 700; color: #ffffff; margin-bottom: 20px; letter-spacing: -0.02em;">Events in deiner Stadt entdecken</h2><p style="font-size: 18px; line-height: 1.6; color: #e8e8e8; margin-bottom: 24px; max-width: 700px; margin-left: auto; margin-right: auto;">Where2Go ist derzeit in <strong>Wien</strong> verfÃ¼gbar und wird kontinuierlich erweitert. Bald auch in weiteren Ã¶sterreichischen und deutschen StÃ¤dten!</p><div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 24px;"><span style="padding: 10px 20px; background: #ffffff; color: #2a2a2a; border-radius: 20px; font-size: 16px; font-weight: 600;">Wien</span><span style="padding: 10px 20px; background: rgba(255, 255, 255, 0.15); color: #e8e8e8; border-radius: 20px; font-size: 16px; font-weight: 500; border: 1px solid rgba(255,255,255,0.2);">MÃ¼nchen (bald)</span><span style="padding: 10px 20px; background: rgba(255, 255, 255, 0.15); color: #e8e8e8; border-radius: 20px; font-size: 16px; font-weight: 500; border: 1px solid rgba(255,255,255,0.2);">Berlin (bald)</span><span style="padding: 10px 20px; background: rgba(255, 255, 255, 0.15); color: #e8e8e8; border-radius: 20px; font-size: 16px; font-weight: 500; border: 1px solid rgba(255,255,255,0.2);">Hamburg (bald)</span><span style="padding: 10px 20px; background: rgba(255, 255, 255, 0.15); color: #e8e8e8; border-radius: 20px; font-size: 16px; font-weight: 500; border: 1px solid rgba(255,255,255,0.2);">Salzburg (bald)</span></div></div><div style="margin-bottom: 60px;"><h2 style="font-size: 32px; font-weight: 700; color: #2a2a2a; margin-bottom: 24px; text-align: center;">Warum Where2Go nutzen?</h2><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px;"><div style="display: flex; gap: 16px; padding: 20px;"><div style="flex-shrink: 0;"><div style="width: 40px; height: 40px; background: #2a2a2a; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 700; color: #ffffff;">âœ“</div></div><div><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">Alle Events an einem Ort</h3><p style="font-size: 15px; line-height: 1.6; color: #4a4a4a; margin: 0;">Keine lÃ¤stige Suche mehr auf verschiedenen Websites â€“ bei uns findest du alle Veranstaltungen zentral.</p></div></div><div style="display: flex; gap: 16px; padding: 20px;"><div style="flex-shrink: 0;"><div style="width: 40px; height: 40px; background: #333333; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 700; color: #ffffff;">âœ“</div></div><div><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">Kostenlos & Einfach</h3><p style="font-size: 15px; line-height: 1.6; color: #4a4a4a; margin: 0;">Die Nutzung von Where2Go ist komplett kostenlos â€“ einfach Events finden und Tickets buchen.</p></div></div><div style="display: flex; gap: 16px; padding: 20px;"><div style="flex-shrink: 0;"><div style="width: 40px; height: 40px; background: #2a2a2a; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 700; color: #ffffff;">âœ“</div></div><div><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">TÃ¤glich neue Events</h3><p style="font-size: 15px; line-height: 1.6; color: #4a4a4a; margin: 0;">Entdecke jeden Tag neue spannende Veranstaltungen und verpasse keine Highlights mehr.</p></div></div><div style="display: flex; gap: 16px; padding: 20px;"><div style="flex-shrink: 0;"><div style="width: 40px; height: 40px; background: #333333; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 700; color: #ffffff;">âœ“</div></div><div><h3 style="font-size: 18px; font-weight: 600; color: #2a2a2a; margin-bottom: 8px;">Personalisierte Empfehlungen</h3><p style="font-size: 15px; line-height: 1.6; color: #4a4a4a; margin: 0;">Basierend auf deinen Interessen schlagen wir dir Events vor, die perfekt zu dir passen.</p></div></div></div></div><div style="padding: 40px; background: #f5f5f5; border-radius: 16px; border: 2px solid #d0d0d0; text-align: center;"><h2 style="font-size: 28px; font-weight: 700; color: #2a2a2a; margin-bottom: 16px;">Du bist Event-Veranstalter?</h2><p style="font-size: 18px; line-height: 1.6; color: #333333; margin-bottom: 28px; max-width: 700px; margin-left: auto; margin-right: auto;">PrÃ¤sentiere deine Events auf Where2Go und erreiche tausende potenzielle Besucher. Wir bieten verschiedene Optionen fÃ¼r maximale Sichtbarkeit.</p><div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 16px;"><a href="/kontakt" style="display: inline-block; padding: 14px 32px; background: #2a2a2a; color: #ffffff; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; transition: transform 0.2s ease;">Kontakt aufnehmen</a><a href="/premium" style="display: inline-block; padding: 14px 32px; background: #ffffff; color: #2a2a2a; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; border: 2px solid #2a2a2a; transition: transform 0.2s ease;">Premium-Optionen ansehen</a></div></div></div>',
  '/',
  '2025-01-01T00:00:00.000Z',
  '2025-01-01T00:00:00.000Z'
)
ON CONFLICT (id) DO NOTHING;

-- Note: Other static pages (datenschutz, agb, impressum, ueber-uns, kontakt, premium)
-- can be added through the admin interface as they don't currently have content
